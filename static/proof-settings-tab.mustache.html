<!-- Proof Settings Tab
    @file proof-settings-tab.mustache.html
    @type template/mustache
    @import portalCustomProgramManager.html
    @link Beta URL - https://marcomcentral.app.pti.com/Epsilon_Data_Management/Beta_Epsilon/CustomPage.aspx?uigroup_id=479602&page_id=11173&programId=5#parentHorizontalTab3
-->
<script class="proof-settings-tab-template" type="x-tmpl-mustache">
  <div class="participation-table">
    <table>
      <thead>
        <tr>
          <td>
            <table>
              <tr>
              <th class="store-enroll">
                <button data-checkboxtype="proof-settings" class="not-active proof-settings select-all btn btn-primary btn-sm">Select All</button>
              </th>
                <th class="store">Store</th>
                <th class="store-materials table-header">
                  <table class="inner-table">
                    <tr class="header-row">
                    <p>PREFERENCES BY CHANNEL</p>
                      <td class="hasEmail">Email</td>
                      <td class="hasDM">DM</td>
                      <td class="hasSMS">SMS</td>
                    </tr>
                  </table>
                </th>
                <th class="store store-proof">Proof Address</tr>
            </table>
          </td>
        </tr>
      </thead>
      <tbody>
        {{#.}}
        <style>
          {{#hasEmail}}
            .proof-settings-tab-section .hasEmail{display:table-cell;}
          {{/hasEmail}}
          {{^hasEmail}}
            .proof-settings-tab-section .hasEmail{display:none;}
          {{/hasEmail}}

          {{#hasDM}}
            .proof-settings-tab-section .hasDM{display:table-cell;}
          {{/hasDM}}
          {{^hasDM}}
            .proof-settings-tab-section .hasDM{display:none;}
          {{/hasDM}}

          {{#hasSMS}}
            .proof-settings-tab-section .hasSMS{display:table-cell;}
          {{/hasSMS}}
          {{^hasSMS}}
            .proof-settings-tab-section .hasSMS{display:none;}
          {{/hasSMS}}
        </style>
        <tr class="filterable" data-filter-storeId="{{storeId}}">
          <td>
            <table>
              <tr>
                <td>
                  <table>
                    <tr class="store-item" data-enrolled="{{#enrolled}}true{{/enrolled}}{{^enrolled}}false{{/enrolled}}">
                      <td class="checkbox-td" style="padding: 10px 0 ">
                        <div class="checkbox-area" data-enrolled="">
                          <div data-storeId="{{storeId}}" class="proof-settings customCheckbox js-all-selectable {{^enrolled}}disabled-input{{/enrolled}}">
                            <input {{^enrolled}}readonly{{/enrolled}} data-checkbox-label="" type="checkbox">
                          </div>
                        </div>
                      </td>
                      <td class="store {{^enrolled}}dim-mid{{/enrolled}}">{{storeName}}
                        <br>
                        <div class="store-number">Store #{{storeId}}</div>
                      </td>
                      <td class="store-materials {{^enrolled}}dim-mid{{/enrolled}}">
                        <table class="inner-table">
                          <tr>
                            {{#hasEmail}}
                            <td class="channelEmailTotal">
                              <select data-prooftype="emProofSettings" data-proofSelected="{{emProofSettings}}" data-storeId="{{storeId}}" class="link-proof link-proof-single form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>
                            {{/hasEmail}}

                            {{#hasDM}}
                            <td class="channelDMTotal">
                              <select data-prooftype="dmProofSettings" data-proofSelected="{{dmProofSettings}}" data-storeId="{{storeId}}" class="link-proof link-proof-single form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>{{/hasDM}}

                            {{#hasSMS}}
                            <td class="channelSMSTotal">
                              <select data-prooftype="smsProofSettings" data-proofSelected="{{smsProofSettings}}" data-storeId="{{storeId}}" class="link-proof link-proof-single form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>{{/hasSMS}}
                          </tr>
                        </table>
                      </td>
                      <td class="store-proof-address {{^enrolled}}dim-mid{{/enrolled}}">
                        <div itemscope itemtype="http://schema.org/Person">
                          <div itemprop="name">{{proofName}}</div>
                          <a href="{{proofEmail}}" itemprop="email">{{proofEmail}}</a>
                          <div itemprop="telephone">{{proofPhone}}</div>
                          <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
                            <span itemprop="streetAddress">{{proofAddress}}</span>,
                            <span itemprop="addressLocality">{{proofCity}}</span>,
                            <span itemprop="addressRegion">{{proofState}}</span>
                            <span itemprop="postalCode">{{proofZip}}</span>
                          </div>
                        </div>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        <tr class="mobile-info-{{storeId}}">
          <td>
            <table class="mobile-table">
              <tr>
                <td class="store-label">Store #</td>
                <td class="store-info">{{storeId}}</td>
              </tr>
              {{#hasEmail}}
              <tr>
                <td class="store-label">Recipients in Email Channel:</td>
                <td class="store-info">{{channelEmail}}</td>
              </tr>
              {{/hasEmail}} {{#hasDM}}
              <tr>
                <td class="store-label">Recipients in DM Channel:</td>
                <td class="store-info">{{channelDM}}</td>
              </tr>{{/hasDM}} {{#hasSMS}}
              <tr>
                <td class="store-label">Recipients in SMS Channel:</td>
                <td class="store-info">{{channelSMS}}</td>
              </tr>
              {{/hasSMS}}
              <tr>
                <td class="store-label">Estimated Monthly Cost:</td>
                <td class="store-info">{{costEstimate}}</td>
              </tr>
            </table>
          </td>
        </tr>
        {{/.}}
          <tr class="proof-settings-footer none">
            <td>
              <table>
                <tr>
                  <tr>
                    <td class="total-label">Request a proof for the <x> selected stores:</td>
                    <td class="store-materials-footer store-materials">
                      <table class="inner-table">
                        <tbody class="bulk-apply-proofSettings">
                          <tr>
                            <td class="hasEmail">
                              <select data-prooftype="emProofSettings" class="link-proof link-proof-bulk form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>
                            <td class="hasDM">
                              <select data-prooftype="dmProofSettings" class="link-proof link-proof-bulk form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>
                            <td class="hasSMS">
                              <select data-prooftype="smsProofSettings" class="link-proof link-proof-bulk form-control" title="Choose Monthly Proof Settings">
                                <option value="0">None</option>
                                <option value="1">Monthly</option>
                                <option value="2">Tomorrow, then Monthly</option>
                                <option value="3">Tomorrow, then None</option>
                              </select>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                    <td class="hasDM store-cost">
                      <div class="hidden">$</div>
                    </td>
                  </tr>
                </tr>
              </table>
            </td>
          </tr>
      </tbody>
    </table>
  </div>
  <script>
    var $j = jQuery;
    setTimeout(function () {
      var quantityLimitController = jQuery.extend({}, checkboxController.controller);
      quantityLimitController.init('proof-settings', function(storeIds) {
        var plural = (storeIds.length === 1) ? '' : 's';
        $j('.proof-settings-footer')
          .toggleClass('none', (storeIds.length < 2));
        $j('.link-proof-bulk').focus();
      });
    }, 100);
  </script>
</script>
