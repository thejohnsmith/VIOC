<!-- Quantity Limits Tab
    @file quantity-limit-tab.mustache.html
    @type template/mustache
    @import portalCustomProgramManager.html
    @link Beta URL - https://marcomcentral.app.pti.com/Epsilon_Data_Management/Beta_Epsilon/CustomPage.aspx?uigroup_id=479602&page_id=11173&programId=5#parentHorizontalTab3
-->
<script class="quantity-limit-tab-template" type="x-tmpl-mustache">
  <div class="participation-table">
    <table>
      <thead>
        <tr>
          <th class="store-enroll">
            <button data-checkboxtype="quantity-limit" class="quantity-limit select-all btn btn-primary btn-sm">Select All</button>
          </th>
          <th class="store">Store</th>
          <th class="print">DM Quantity Limit</th>
        </tr>
      </thead>
      <tbody>
        {{#.}}
        <tr class="filterable" data-filter-storeId="{{storeId}}">
          <td style="padding: 10px 0 0 0">
            <div class="checkbox-area" data-enrolled="">
              <div data-storeId="{{storeId}}" class="quantity-limit customCheckbox js-all-selectable {{^enrolled}}disabled-input{{/enrolled}}">
                <input {{^enrolled}}readonly{{/enrolled}} data-checkbox-label="" type="checkbox">
              </div>
            </div>
          </td>
          <td data-storeId="{{storeId}}" class="store quantity-limit-store" style="padding: 8px">
            <div class="store-name">{{storeName}}</div>
            <div class="store-number">Store #{{storeId}}</div>
          </td>
          <td class="store-configuration" style="padding: 8px">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-8">
                  <input value="{{quantityLimit}}" tabindex="1" data-storeId="{{storeId}}" type="number" placeholder="Limit" class="form-control {{^enrolled}}disabled-input{{/enrolled}}">
                </div>
                <div class="col-sm-2">
                  <button tabindex="1" class="btn btn-small btn-primary">Apply</button>
                </div>
              </div>
            </div>
          </td>
        </tr>
        {{/.}}
        <tr class="quantity-limit footer-row">

          <td class="quantity-limit-footer" colspan="2" style="padding: 0 14px 0;text-align: right;">
            Set quantity limit on
            <span class="quantity-limit-footer-selected-count"> 0 </span> selected store(s):
          </td>
          <td class="quantity-limit-footer store-configuration" style="padding: 8px">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-8">
                  <input value="{{quantityLimit}}" tabindex="1" data-storeId="{{storeId}}" type="number" placeholder="Limit" class="form-control">
                </div>
                <div class="col-sm-2">
                  <button tabindex="1" href="#" class="btn btn-small btn-primary bulk-apply-program">Apply</button>
                </div>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <script>
    var $j = jQuery;
    var quantityLimitController = jQuery.extend({}, checkboxController.controller);
    quantityLimitController.init("quantity-limit", function(storeIds) {
      // console.log("Stores changed: %O", storeIds);
      var plural = (storeIds.length === 1) ? '' : 's';
      $j('.quantity-limit.footer-row')
        .toggleClass('none', (storeIds.length < 2));
      $j('.quantity-limit.footer-row td.quantity-limit-footer:first-child')
        .html('Set quantity limit on ' + storeIds.length + ' selected store' + plural + ':');
    });
  </script>
</script>
